<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Geography of Absence | Iran 2026 Memorial</title>
  <meta name="description"
    content="An immersive memorial for those lost in the 2026 Iran massacres. A wounded land that never heals.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&family=Vazirmatn:wght@300;400;500;700;900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/src/style.css">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/favicon.png">
</head>

<body>
  <!-- Loading Overlay -->
  <div id="loading-overlay">
    <div class="loading-content">
      <div class="loading-line"></div>
    </div>
  </div>

  <!-- Onboarding Overlay -->
  <div id="onboarding-overlay" class="hidden">
    <div class="onboarding-content">
      <!-- Step 1: Language -->
      <div id="onboarding-step-lang" class="onboarding-step">
        <h2 class="onboarding-lang-en">Choose your language</h2>
        <h2 class="onboarding-lang-fa">ÿ≤ÿ®ÿßŸÜ ÿÆŸàÿØ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
        <div class="onboarding-buttons">
          <button id="btn-lang-en" class="onboarding-btn">English</button>
          <button id="btn-lang-fa" class="onboarding-btn">ŸÅÿßÿ±ÿ≥€å</button>
        </div>
      </div>

      <!-- Step 2: Sound -->
      <div id="onboarding-step-sound" class="onboarding-step hidden">
        <h2 data-i18n="onboarding.sound.title">This experience includes audio</h2>
        <div class="onboarding-buttons">
          <button id="btn-sound-on" class="onboarding-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
              <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
              <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
            </svg>
            <span data-i18n="onboarding.sound.unmute">Unmute</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Cinematic Intro Layer - "47 Years. One Voice." -->
  <div id="cinematic-intro" class="hidden">
    <!-- Scene 0: Absolute Darkness -->
    <div class="intro-scene scene-0 active" data-scene="0">
      <!-- Atmospheric Background -->
      <div class="testimony-atmosphere">
        <div class="atmosphere-vignette"></div>
        <div class="atmosphere-grain"></div>
        <div class="atmosphere-flicker"></div>
      </div>

      <!-- Particle System -->
      <canvas id="testimony-particles" class="testimony-particles"></canvas>

      <div class="testimony-content">
        <!-- Identity Header -->
        <div class="testimony-identity" id="testimony-identity">
          <div class="identity-name-container">
            <span class="identity-name">Vahid Afkari</span>
            <div class="name-underline"></div>
          </div>
          <div class="identity-meta-container">
            <span class="identity-meta">Executed 2020</span>
            <div class="meta-embers"></div>
          </div>
        </div>

        <!-- Portrait Container -->
        <div class="testimony-portrait" id="testimony-portrait">
          <div class="portrait-glow"></div>
          <div class="portrait-frame">
            <div class="portrait-image">
              <img src="/images/vahid-afkari.png" alt="Vahid Afkari">
            </div>
            <div class="portrait-overlay"></div>
          </div>
        </div>

        <!-- Testimony Quote -->
        <div class="testimony-quote" id="testimony-quote">
          <div class="testimony-line-wrapper">
            <p class="testimony-line" data-segment="1">I am not speaking only to Iran.</p>
          </div>
          <div class="testimony-line-wrapper">
            <p class="testimony-line" data-segment="2">I speak to every human being</p>
          </div>
          <div class="testimony-line-wrapper">
            <p class="testimony-line" data-segment="3">who claims humanity and carries even a trace of honor.</p>
          </div>

          <!-- Impact Final Line -->
          <div class="impact-wrapper">
            <div class="testimony-line impact vertical-stack" data-segment="4">
              <span class="impact-word">Your</span>
              <span class="impact-word">silence</span>
              <span class="impact-word">means</span>
              <span class="impact-word">supporting</span>
              <span class="impact-word">oppression</span>
              <span class="impact-word">and</span>
              <span class="impact-word">the</span>
              <span class="impact-word">oppressor.</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Audio Hint -->
      <div class="scene-audio-hint">
        <div class="audio-wave">
          <span></span><span></span><span></span>
        </div>
      </div>
    </div>

    <!-- Scene 1: Protests Timeline -->
    <div class="intro-scene scene-timeline" data-scene="1">
      <div id="timeline-video-container" class="timeline-video-container">
        <video id="timeline-bg-video" autoplay muted loop playsinline class="hidden"></video>
      </div>

      <div class="timeline-top-info">
        <h2 id="protest-title" class="protest-title"></h2>
        <span class="protest-separator"></span>
        <p id="protest-reason" class="protest-reason"></p>
      </div>

      <div class="timeline-main">
        <div id="timeline-year" class="timeline-year"></div>
        <div class="timeline-controls">
          <button id="prev-protest" class="timeline-nav-btn" aria-label="Previous">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6" />
            </svg>
          </button>
          <button id="next-protest" class="timeline-nav-btn" aria-label="Next">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Scene 2: The Meaning of the Tulip -->
    <div class="intro-scene scene-4" data-scene="2">
      <div class="intro-text-wrapper tulip-text">
        <p class="intro-text-line">In Persian culture, the red tulip blooms from blood.</p>
        <p class="intro-text-line">It is the symbol of martyrdom.</p>
        <p class="intro-text-line">Of those who die so a nation may live.</p>
        <p class="intro-text-line accent">Each tulip marks a life taken.</p>
        <p class="intro-text-line accent">Each one refuses to be forgotten.</p>
      </div>
    </div>

    <!-- Scene 3: Transition to Map -->
    <div class="intro-scene scene-5" data-scene="3">
      <div class="intro-text-wrapper final-text">
        <p class="intro-text-line large">This land remembers every name.</p>
      </div>
    </div>

    <!-- Scroll Hint -->
    <div id="scroll-hint" class="scroll-hint">
      <span class="scroll-text">Scroll to explore</span>
      <div class="scroll-bar"></div>
    </div>

    <!-- Skip Button -->
    <button id="skip-intro" class="skip-button" data-i18n="intro.skip">Skip</button>

  </div>

  <!-- Audio Elements for Dynamic Layers -->
  <audio id="audio-scene0-mother" preload="auto" src="/audio/intro/scene0_vahid_afkari.mp3"></audio>
  <audio id="audio-scene0-chant" preload="auto" src="/audio/intro/scene0_protest_chant_distant.mp3"></audio>
  <audio id="audio-scene0-wind" preload="auto" src="/audio/intro/scene0_wind_breath.mp3"></audio>
  <audio id="audio-scene1-azadi" preload="auto" src="/audio/intro/scene1_azadi_whisper.mp3"></audio>
  <audio id="audio-scene1-protest" preload="auto" src="/audio/intro/scene1_old_protest_memory.mp3"></audio>
  <audio id="audio-scene2-chant" preload="auto" src="/audio/intro/scene2_chant_evolving.mp3"></audio>
  <audio id="audio-scene2-woman" preload="auto" src="/audio/intro/scene2_woman_shouting.mp3"></audio>
  <audio id="audio-scene2-father" preload="auto" src="/audio/intro/scene2_father_voice.mp3"></audio>
  <audio id="audio-scene3-crowd" preload="auto" src="/audio/intro/scene3_crowd_feet_breathing.mp3"></audio>
  <audio id="audio-scene4-narrator" preload="auto" src="/audio/intro/scene4_calm_narrator.mp3"></audio>
  <audio id="audio-scene5-bass" preload="auto" src="/audio/intro/scene5_transition_bass.mp3"></audio>
  <audio id="timeline-protest-audio" preload="auto"></audio>

  <!-- Dynamic Audio Layers -->
  <audio id="audio-memory-layer" loop preload="auto" src="/audio/intro/layers/memory_layer.mp3"></audio>
  <audio id="audio-resistance-layer" loop preload="auto" src="/audio/intro/layers/resistance_layer.mp3"></audio>
  <audio id="audio-silence-layer" loop preload="auto" src="/audio/intro/layers/silence_layer.mp3"></audio>

  <!-- Names Background Layer - "The Names That Never Stop Passing" -->
  <div id="names-background" class="hidden" aria-hidden="true"></div>

  <!-- Main Canvas Container -->
  <div id="canvas-container" class="hidden"></div>

  <!-- Intro Text (Legacy, will be handled by narrative or used for Act III transition) -->
  <div id="intro-text" class="hidden">
    <h1 data-i18n="intro.title">Geography of Absence</h1>
    <p data-i18n="intro.subtitle">Each tulip, a life taken</p>
    <p class="subtitle" data-i18n="intro.date">Iran, January 2026</p>
  </div>

  <!-- Search Feature -->
  <div id="search-container" class="hidden">
    <div class="search-wrapper">
      <div class="search-input-box">
        <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2">
          <circle cx="12" cy="12" r="8" />
          <line x1="22" y1="22" x2="17.65" y2="17.65" />
        </svg>
        <input type="text" id="search-input" data-i18n-placeholder="search.placeholder" autocomplete="off">
        <button id="clear-search" class="hidden" aria-label="Clear search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
        <button id="close-search-mobile" class="hidden" aria-label="Close search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>
      <div id="search-results" class="hidden"></div>
    </div>
  </div>

  <!-- Controls Hint -->
  <div id="controls-hint">
    <span data-i18n="controls.drag">Drag to rotate</span>
    <span class="divider">‚Ä¢</span>
    <span data-i18n="controls.scroll">Scroll to zoom</span>
    <span class="divider">‚Ä¢</span>
    <span data-i18n="controls.click">Click a tulip to remember</span>
  </div>

  <!-- Info Button -->
  <button id="info-button" aria-label="Information">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10" />
      <line x1="12" y1="16" x2="12" y2="12" />
      <line x1="12" y1="8" x2="12.01" y2="8" />
    </svg>
  </button>

  <!-- Info Panel -->
  <div id="info-panel" class="hidden">
    <button id="close-panel" aria-label="Close">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18" />
        <line x1="6" y1="6" x2="18" y2="18" />
      </svg>
    </button>
    <div class="panel-content">
      <h2 data-i18n="panel.title">The 2026 Iran Massacres</h2>
      <p class="panel-date" data-i18n="panel.date">December 2025 ‚Äì January 2026</p>

      <div class="stat-grid">
        <div class="stat">
          <span class="stat-number" data-count="18000">0</span>
          <span class="stat-label" data-i18n="stat.deaths">Estimated Deaths</span>
        </div>
        <div class="stat">
          <span class="stat-number" data-count="330000">0</span>
          <span class="stat-label" data-i18n="stat.injured">Injured</span>
        </div>
        <div class="stat">
          <span class="stat-number" data-count="50000">0</span>
          <span class="stat-label" data-i18n="stat.detained">Detained</span>
        </div>
        <div class="stat">
          <span class="stat-number" data-count="180">0</span>
          <span class="stat-label" data-i18n="stat.cities">Cities Affected</span>
        </div>
      </div>

      <div class="panel-section">
        <h3 data-i18n="section.what">What Happened</h3>
        <p data-i18n="section.what.p1">In late December 2025, widespread protests erupted across Iran following a severe
          economic crisis. The government responded with extreme force, implementing a near-total internet blackout on
          January 8, 2026.</p>
        <p data-i18n="section.what.p2">Security forces, including the IRGC and Basij, were ordered to "shoot to kill."
          Reports document the use of heavy machine guns against crowds, hospital attacks, and widespread torture.</p>
      </div>

      <div class="panel-section">
        <h3 data-i18n="section.tulip">The Red Tulip</h3>
        <p data-i18n="section.tulip.p1">In Persian culture, the red tulip (ŸÑÿßŸÑŸá) symbolizes martyrdom and the blood of
          those who fell. Each tulip on this map represents one identified victim‚Äîplaced where they took their last
          breath.</p>
        <p data-i18n="section.tulip.p2">We have identified 120+ victims. The true number is far greater. Due to the
          information blackout, many will never be named.</p>
      </div>

      <div class="panel-section sources">
        <h3 data-i18n="section.sources">Sources</h3>
        <ul>
          <li>Human Rights Activists News Agency (HRANA)</li>
          <li>Wikipedia: ⁄©ÿ¥ÿ™ÿßÿ±Ÿáÿß€å ÿØ€å €±€¥€∞€¥ ÿß€åÿ±ÿßŸÜ</li>
          <li>The Sunday Times</li>
          <li>Iran International</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Victim Info Popup -->
  <div id="victim-popup" class="hidden">
    <button id="close-victim-popup" aria-label="Close">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18" />
        <line x1="6" y1="6" x2="18" y2="18" />
      </svg>
    </button>
    <div class="victim-popup-content">
      <div class="tulip-icon">üå∑</div>
      <h3 id="victim-name"></h3>
      <p id="victim-name-en" class="victim-name-en"></p>
      <!-- Victim Image -->
      <div id="victim-image-container" class="victim-image-container hidden">
        <img id="victim-image" src="" alt="Victim">
      </div>

      <div class="victim-info">
        <div class="victim-details">
          <p id="victim-city"></p>
          <p id="victim-age"></p>
          <p id="victim-date"></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Victim Hover Label -->
  <div id="victim-hover-label" class="hidden"></div>

  <!-- Audio Element -->
  <audio id="ambient-audio" loop preload="auto">
    <source src="/audio/ambient.mp3" type="audio/mpeg">
  </audio>

  <!-- Sound Toggle -->
  <button id="sound-toggle" aria-label="Toggle sound">
    <svg id="sound-on" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
      <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
      <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
    </svg>
    <svg id="sound-off" class="hidden" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2">
      <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
      <line x1="23" y1="9" x2="17" y2="15" />
      <line x1="17" y1="9" x2="23" y2="15" />
    </svg>
  </button>

  <!-- Language Toggle -->
  <button id="lang-toggle" aria-label="Toggle language">
    <span class="lang-text">FA | EN</span>
  </button>

  <!-- Act IV Minimalist Tagline -->
  <div id="memorial-tagline" class="hidden" data-i18n="memorial.tagline">Every tulip is a life.</div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>